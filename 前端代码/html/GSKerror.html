<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
		<title>title</title>
		<link rel="stylesheet" type="text/css" href="../css/api.css" />
		<link rel="stylesheet" type="text/css" href="../css/api.css" />
  	<link rel="stylesheet" type="text/css" href="../css/aui.css" />
	  <script type="text/javascript" src="../script/aui-toast.js"></script>
<link rel="stylesheet" type="text/css" href="../css/api1.css" />
		<style>
			body {
			}
			html, body {
				height: 100%
			}
			body {
				background-color: #fff;
				margin: 0;
			}
			#wrap {
				height: 2000px;
				position: relative;
			}
		.hdiv {
				padding-top: 20px;
				background-color: #f2f2f2;
				height: 20px;
				position: relative;
			}
			#header h1 {
				font-size: 20px;
				height: 44px;
				line-height: 44px;
				margin: 0em;
				color: #fff;
				margin-left: 100px;
				margin-right: 100px;
				text-align: center;
			}
			#main {
				display: -webkit-box;
				-webkit-box-orient: vertical;
				-webkit-box-pack: center;
			}
			a.button {
				display: -webkit-box;
				-webkit-box-orient: vertical;
				-webkit-box-pack: center;
				-webkit-box-align: center;
				height: 32px;
				margin: 8px;
				background-color: rgba(240, 240, 240, 1.0);
				border-color: rgba(220, 220, 220, 1.0);
				border-width: 2px;
				border-style: solid;
			}
			a.active {
				background-color: rgba(240, 240, 240, 0.7);
			}

		</style>
	</head>
	<body>
		<header class="aui-bar aui-bar-nav aui-bar-light" style="height:75px">
            <div class="aui-pull-left aui-btn" onclick="goback()" style="height:75px">

            </div>
            <div class="aui-title" style="margin-top:26px">错误列表一览</div>
        </header>
  <div class="empty"></div>
<div id="aa"></div>
	</body>

	<script type="text/javascript" src="../script/api.js"></script>
	<script type="text/javascript">
	function goback () {
	   api.closeWin({name:'GSKerror'});
	 }

  apiready = function() {
		var demo;
		var brand = api.pageParam.brand;//判断被点击的错误类型是哪个
		var listdata = new Array();
  	var arrayObj1 = new Array(
			'000:急停报警，ESP输入开路',
			'1:零件程序打开失败',
			'2:一段程序超过了256个字符',
			'3:数据超过允许的取值范围',
			'4:地址没找到',
			'5:地址后面无数据',
			'6:负号使用不正确',
			'7:小数点使用不正确',
			'8:输入非法地址',
			'9:不正确的G代码',
			'10:地址重复错误',
			'11:出现了不能在DNC下 运行的指令',
			'12:出现了过多的M代码',
			'14:被零除',
			'17:参数写入失败',
			'18:零件程序操作失败',
			'19:记录结束',
			'20:DNC超时',
			'21:进给速度设定值 不在范围之内',
			'22:主轴转速设定值 不在范围之内',
			'23:M指令值不在范围之内',
			'24:G代码使用错误',
			'25:非法刀具号',
			'26:非法补偿号',
			'27:非法偏置值',
			'28:在此程序段中 不允许有T代码',
			'29:刀具寿命指令执行出错',
			'30:G28、G30、G53或G36/G37指令不能与M99在同一程序段中指定',
			'31:指令了太多的轴',
			'32:指令了插补指令 不能执行的轴',
			'33:指令了非法平面轴',
			'34:没有圆弧半径',
			'35:非法半径指令',
			'36:超出半径差值范围',
			'37:螺纹切削指令中，退尾长度J、K值指令有误.',
			'38:非法导程指令',
			'39:螺纹切削指令中， 长轴的退尾长度过大',
			'40:螺纹切削指令中， 短轴的退尾长度过大',
			'41:非法的平面选择',
			'42:公英制切换指令错误',
			'43:返回参考点未完成',
			'44:没有完成参考点返回',
			'45:轴不在参考点',
			'46:在顺序返回中发现G28',
			'47:指定的轴没有返回过参考点',
			'48:指令了错误的参考点',
			'51:未捕捉到自动刀具补偿到达信号',
			'52:自动刀具补偿中 未发现偏移号',
			'53:自动刀具补偿中 不允许T代码',
			'54:自动刀具补偿中 的非法轴指令',
			'55:自动刀具补偿指令无效',
			'56:自动刀具补偿不能用于 刀尖半径补偿方式下',
			'58:G31不能用于 每转进给方式下',
			'59:G31不能用于 刀尖半径补偿方式下',
			'61:G10中指令了非法L',
			'62:G10中指令了非法P',
			'63:可编程数据输入指令不匹配',
			'64:可编程数据输入中非法指令',
			'65:偏移累加量超过取值范围',
			'68:行程检查范围设置错误',
			'71:请执行主轴定向',
			'72:C/H代码和移动指令 在同一程序段中',
			'73:M代码和移动指令 在同一程序段中',
			'74:非法指令G12.1/G13.1',
			'75:极坐标插补下指定了 不可用的G代码或T代码',
			'76:指令了不正确的G07.1指令',
			'77:在圆柱插补方式下指定了 不正确的G代码',
			'78:在圆柱插补方式下指令了不正确的代码',
			'81:未定义地址P',
			'82:子程序嵌套错误',
			'83:未找到程序号',
			'84:子程序调用错误',
			'85:程序调用语句不能在录入和DNC方式下运行',
			'90:主轴恒线速控制中 轴指令错误',
			'101:螺纹加工时主轴速度过快',
			'102:螺纹加工时主轴转速 过低或为零',
			'103:未能检测到 主轴编码器一转信号',
			'105:主轴编码器线数不在100～5000范围内',
			'106:普通攻丝时主轴旋转指令信号(SFR,SRV)错误或主轴编码器数据不正确.',
			'107:普通攻丝时主轴转速过低或过高,导致攻丝轴不能正常进给',
			'110:上电机床坐标系初始化错误',
			'121:非ZX平面中指令了 固定循环指令',
			'122:循环中指定了 ZX基本坐标系之外的轴',
			'123:G90 G92指令中的R绝对值大于U(半径值)的值',
			'124:G94指令中的 R绝对值大于W的值',
			'126:多重循环中 有非法的平面选择',
			'127:G70~G76中指令了ZX平面以外的轴地址',
			'128:G70~G73中 的不正确的G代码',
			'129:G70~G73指令在录入方式下不能运行',
			'130:G70~G73循环中 不允许执行宏语句',
			'131:G70~G73循环中 调用了子程序',
			'132:G70~G73指令行中 调用了子程序',
			'133:G70~G73指令中地址 P或Q不在范围内',
			'134:G70~G73指令的 循环段号未搜索到',
			'135:G70~G73指令中 发现P与Q的指令有误',
			'136:G71~G73指令中 未发现两段连续的指令段',
			'137:G70~G73指令中 Ns-Nf程序段超过100段',
			'138:G71~G73指令中 Ns-Nf段为非单调',
			'139:G71~G73指令的 定位点在切削范围之内',
			'140:G71 II型加工轨迹中 指令了过多的凹槽',
			'141:G73循环中X轴的退刀方向与精车余量方向不符',
			'142:G73循环中Z轴的退刀方向与精车余量方向不符',
			'143:G71 II型一次 循环中加工段过多',
			'144:G71~G72循环起始段中没有指令G00或G01',
			'145:G73循环起始段中 没有指令G00-G03',
			'146:G71循环起始段 需要X轴增量',
			'147:G72循环起始段 只需要Z轴增量',
			'148:G71或G72指令中单次进刀量小于最小指令单位',
			'149:G71或G72指令中 单次退刀量R(e) 小于零',
			'150:G73指令中 总切削量超出允许范围',
			'151:G73指令中循环次数R(d) 不在允许的范围',
			'152:G73指令的定位点位于切削范围之外，可能导致过切',
			'153:G74指令中Q的值 不在所需要的范围之内',
			'154:G75指令中未输入X轴的指令值',
			'155:G75指令中P的值 不在所需要的范围',
			'156:G74或G75指令中R(e)  小于零',
			'157:G74或G75指令中R(△d)  小于零',
			'158:G74或G75中 单次切削量超出范围',
			'160:G76指令中 X或Z轴移动量为0',
			'161:G76循环次数 小于1或者大于99',
			'162:G76螺纹倒角宽度 超出允许范围',
			'163:G76指令中刀尖角度 超出允许范围',
			'164:G76指令中Q(△dmin)超出范围',
			'165:G76精加工余量R(d) 超出允许范围',
			'166:G76加工锥螺纹时 R值和U值不匹配',
			'167:G76指令中 没有指定螺纹牙高P值',
			'168:G76牙高指令了 不可使用的值',
			'169:G76指令中Q值不在范围内',
			'170:G76指令的螺纹锥度 大于45度',
			'171:G76指令的螺纹锥度 平行于刀刃',
			'172:指令了不正确的G76指令',
			'180:刚性攻丝中非法S指令',
			'181:攻丝中或钻孔固定循环中 非法K指令',
			'182:攻丝中非法F指令',
			'183:刚性攻丝中程序不对',
			'184:刚性攻丝中或钻孔固定循环中非法轴操作',
			'185:刚性攻丝中主轴不可以攻丝',
			'186:攻丝中攻丝轴改变或钻孔固定循环中钻孔轴改变',
			'187:攻丝中或钻孔 固定循环中数据不正确',
			'188:攻丝中数据重复指定',
			'189:刚性攻丝中M代码重复',
			'190:刚性攻丝中 出现了伺服主轴指令',
			'191:刚性攻丝方式信号关闭',
			'192:不能在G96方式下指令G84/G88进行攻丝',
			'197:在主轴方式下的C轴指令错误',
			'198:未检测到主轴速度到达信号',
			'201:宏程序中 使用了不正确的指令',
			'202:宏程序中格式错误',
			'203:宏程序中使用了非法变量号',
			'204:宏程序重复调用',
			'205:括号嵌套错误',
			'206:运算的数据非法',
			'207:多重宏模态调用过多',
			'208:DNC和录入中不能使用 跳转语句等转移宏指令',
			'209:缺少结束语句',
			'210:权限不够执行宏变量 赋值操作',
			'211:非法循环数',
			'212:在同一程序段中有NC语句 和宏调用语句',
			'213:非法宏顺序号',
			'214:非法自变量地址',
			'215:刀尖方向数据错误',
			'216:非法变量值',
			'217:逻辑运算指令的数据错误',
			'218:指令了G67模态调用取消',
			'219:宏变量写保护',
			'220:宏变量禁止写入',
			'221:宏变量运算浮点数溢出',
			'222:不能使用该M代码调用宏程序',
			'231:NC和PLC 的轴控指令发生竞争',
			'232:不能改变PLC控制轴',
			'251:刀尖半径补偿方式中无法确定交点',
			'252:圆弧指令中不能建立 和取消刀尖半径补偿方式',
			'253:刀尖半径补偿方式中 不允许切换补偿平面',
			'254:刀尖半径补偿方式中 圆弧程序段产生干涉',
			'255:刀尖半径补偿方式中G90 或者G94段有干涉',
			'256:刀尖半径补偿方式中 干涉检查有过切现象',
			'257:刀尖半径补偿方式中轨迹方向与编程轨迹方向不同',
			'258:录入方式中 不允许执行G41或者G42',
			'259:切削整圆内部可能产生过切',
			'260:加工小于刀具半径的台阶时可能产生欠切',
			'261:加工内圆时圆弧半径 小于刀具半径',
			'262:暂时撤消或者建立刀尖半径 补偿方式时出现圆弧指令',
			'263:刀尖半径补偿方式时检测到错误',
			'271:当前程序段中 不能指令倒角或拐角 R',
			'272:倒角或拐角 R 后不是 G01G02/G03模态指令',
			'273:倒角或拐角 R 后 不是需要的轴地址',
			'274:倒角或拐角 R 后 指定了平面选择指令',
			'275:倒角或拐角 R 的程序段中 指令的移动量过小',
			'276:倒角或拐角 R 中数据有误',
			'281:非法刀具组号',
			'282:没有发现刀具组号',
			'283:没有空间用于刀具的存储',
			'284:没有发现 T代码',
			'285:没有发现 P/L 指令',
			'286:刀具组太多',
			'287:非法刀具寿命数据',
			'288:没有完成刀具数据设定',
			'289:刀具寿命管理指令不匹配'
	)
	var arrayObj2=new Array(
		'?400:参数开关已打开',
'401:进给轴的从机号',
'402:参数备份失败',
'403:参数恢复失败',
'404:设置了相同的轴名',
'406:非 Cs 轴与主轴的从机号设置为相同',
'407:Cs 轴与主轴的 从机号不一致',
'408:主轴的从机号 设置为相同',
'411:坐标记忆未设置',
'414:NVRAM数据不匹配',
'450:参数已修改， 请重新上电',
'452:CNC控制轴数 大于总控轴数',
'454:设置了相同的 伺服轴号',
'455:旋转轴与轴属性冲突'
	)


  if(brand==1) var bb=[].concat(arrayObj1);
	if(brand==2) var bb=[].concat(arrayObj2);//确定是哪个错误类型

	   for(var i=0;i<bb.length;i++){
			 arr=bb[i].split(":");
			 tem = {
			 uid : '1001',
			 imgPath : 'widget://image/33.jpg',
			 title : arr[0],
			 subTitle : arr[1],
			 remark : '查看详情',
			 icon : '',
			 id:'2'
			 }
			   listdata.push(tem);
		 }


		//下面定义列表
			demo = api.require('UIListView');
			$api.dom('.empty').innerHTML =
			demo.open({
				rect : {
					x : 0,
					y : 77,//调节列表距离顶部的长度
					w : api.winWidth,
					h : api.frameHeight
				},
				data : listdata,
				styles : {
					borderColor : '#696969',
					item : {
						bgColor : '#F5F5F5',
						activeBgColor : '#AFEEEE',
						height : 55.0,
						marginTop:-255,
						imgWidth : 40,
						imgHeight : 40,
						imgCorner : 4,
						placeholderImg : '',
						titleSize : 12.0,
						titleColor : '#000',
						subTitleSize : 12.0,
						subTitleColor : '#000',
						remarkColor : '#000',
						remarkSize : 16,
						remarkIconWidth : 30
					}
				},
				fixedOn : api.frameName
			}, function(ret, err) {
				if (ret) {
					 //alert(JSON.stringify(ret));
					 var str = JSON.stringify(ret);
					 //alert(JSON.stringify(ret)+"ca");
					 if(str.indexOf("index")!=-1)
								 str = str.match(/"index":(\S*)}/)[1];//获取索引
					 if(JSON.stringify(ret).indexOf("index")!=-1){
							 //alert(str+"111111")
           demo.onclick=  api.openWin({
									 name: 'GSKAns1',
									 url: './GSKAns1.html',
				          pageParam: {
				              error:str,
											type:brand,
				         }
				      });
						}

				} else {
					alert(JSON.stringify(err));
				}
			});
		};

	</script>

</html>
